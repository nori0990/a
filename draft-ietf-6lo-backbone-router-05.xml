<?xml version="1.0" encoding="ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC8200 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8200.xml">
<!ENTITY RFC3315 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3315.xml">
<!ENTITY RFC3810 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3810.xml">
<!ENTITY RFC3963 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3963.xml">
<!ENTITY RFC3971 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3971.xml">
<!ENTITY RFC3972 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3972.xml">
<!ENTITY RFC4291 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4291.xml">
<!ENTITY RFC4389 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4389.xml">
<!ENTITY RFC4429 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4429.xml">
<!ENTITY RFC4443 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4443.xml">
<!ENTITY RFC4861 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4861.xml">
<!ENTITY RFC4862 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4862.xml">
<!ENTITY RFC4919 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4919.xml">
<!ENTITY RFC4903 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4903.xml">
<!ENTITY RFC4944 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4944.xml">
<!ENTITY RFC5415 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5415.xml">
<!ENTITY RFC6059 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6059.xml">
<!ENTITY RFC6550 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6550.xml">
<!ENTITY RFC6275 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6275.xml">
<!ENTITY RFC6282 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6282.xml">
<!ENTITY RFC6830 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6830.xml">
<!ENTITY RFC7217 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7217.xml">
<!ENTITY RFC7428 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7428.xml">
<!ENTITY RFC6775 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6775.xml">
<!ENTITY I-D.ietf-ipv6-multilink-subnets SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-ipv6-multilink-subnets.xml">
<!ENTITY I-D.ietf-6tisch-architecture SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-6tisch-architecture.xml">

]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>

<rfc category="std" ipr="trust200902" docName="draft-ietf-6lo-backbone-router-05">

<?rfc toc="yes" ?>
<?rfc symrefs="yes" ?>
<?rfc sortrefs="yes"?>
<?rfc iprnotified="no" ?>
<?rfc strict="yes" ?>
<?rfc inline="yes"?>
<?rfc compact="no"?>
<?rfc subcompact="no"?>
<?rfc authorship="yes"?>
<?rfc tocappendix="yes"?>

    <front>
        <title>IPv6 Backbone Router</title>
   <author fullname="Pascal Thubert" initials="P" role="editor" surname="Thubert">
      <organization abbrev="cisco">Cisco Systems, Inc</organization>
      <address>
         <postal>
		 <street>Building D</street>
		 <street>45 Allee des Ormes - BP1200 </street>
            <city>MOUGINS - Sophia Antipolis</city>
            <code>06254</code>
            <country>FRANCE</country>
         </postal>
         <phone>+33 497 23 26 34</phone>
         <email>pthubert@cisco.com</email>
      </address>
   </author>
        <date/>

	<area>Internet</area>

	<workgroup>6lo</workgroup>

        <abstract>
	  <t>

	  This specification proposes proxy operations for IPv6 Neighbor Discovery
      on behalf of devices located on broadcast-inefficient wireless networks. 
      A broadcast-efficient backbone running classical IPv6 Neighbor Discovery
      federates multiple wireless links to form a large MultiLink Subnet, but
      the broadcast domain does not need to extend to the wireless links for the
      purpose of ND operation.
      Backbone Routers placed at the wireless edge of the backbone proxy the ND
      operation and route packets from/to registered nodes, and wireless nodes
      register or are proxy-registered to the Backbone Router to setup proxy
      services in a fashion that is essentially similar to a classical Layer-2
      association.
      
	  </t>
	</abstract>
    </front>

    <middle>

	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
   
   
	<section anchor="introduction" title="Introduction">
        <t> 
        One of the key services provided by 
        <xref target="IEEEstd8021">IEEE std. 802.1</xref> Ethernet Bridging
        is an efficient and reliable broadcast service, and multiple applications
        and protocols have been built that heavily depend on that feature for
        their core operation.
        But a wide range of wireless networks do not provide the solid and cheap
        broadcast capabilities of Ethernet Bridging, and protocols designed for
        bridged networks that rely on broadcast often exhibit disappointing
        behaviours when applied unmodified to a wireless medium.
        </t><t>
        <xref target="IEEEstd80211">IEEE std. 802.11</xref> Access Points (APs)
        deployed in an Extended Service Set (ESS) effectively act as bridges,
        but, in order to ensure a solid connectivity to the devices and protect
        the medium against harmful broadcasts, they refrain from relying on
        broadcast-intensive protocols such as Transparent Bridging on the
        wireless side.
        Instead, an association process is used to register proactively the MAC
        addresses of the wireless device (STA) to the AP, and then the APs 
        proxy the bridging operation and cancel the broadcasts.
         </t>
   	    <t>Classical IPv6 <xref target="RFC8200"/> Neighbor Discovery
        <xref target="RFC4861"/> <xref target="RFC4862"/> Protocol (NDP)
        operations are reactive and rely heavily on multicast operations to
        locate an on-link correspondent and ensure address uniqueness,
        which is a pillar that sustains the whole IP architecture. 
        When the Duplicate Address Detection <xref target="RFC4862"/> (DAD)
        mechanism was designed, it was a natural match with the efficient
        broadcast operation of Ethernet Bridging, but with the unreliable 
        broadcast that is typical of wireless media, DAD is bound to fail to
        discover duplications <xref target="I-D.yourtchenko-6man-dad-issues"/>.
        In other words, because the broadcast service is unreliable,
        DAD appears to work on wireless media not because address duplication
        is detected and solved as designed, but because the duplication is a
        very rare event as a side effect of the sheer amount of entropy
        in 64-bits Interface IDs. </t>
        <t>
        In the real world, IPv6 multicast messages are effectively broadcast, so 
        they are processed by most if not all wireless nodes over the ESS fabric
        even when very few if any of the nodes is effectively listening to the
        multicast address. 
        It results that a simple Neighbor Solicitation (NS) lookup message 
        <xref target="RFC4861"/>, that is supposedly targeted to a very small
        group of nodes, ends up polluting the whole wireless bandwidth across 
        the fabric <xref target="I-D.vyncke-6man-mcast-not-efficient"/>. 
        In other words, the reactive IPv6 ND operation leads to undesirable
        power consumption in battery-operated devices.
        </t>  <t>
        The inefficiencies of using radio broadcasts to support IPv6 NDP
        lead the community to consider (again) splitting the broadcast domain
        between the wired and the wireless access links. One classical way to
        achieve this is to split the subnet in multiple ones, and at the extreme
        provide a /64 per wireless device. Another is to proxy the Layer-3
        protocols that rely on broadcast operation at the boundary of the wired
        and wireless domains, effectively emulating the Layer-2 association at
        layer-3.
        To that effect, the current IEEE std. 802.11 specifications require the
        capability to perform ARP and ND proxy <xref target="RFC4389"/>
        functions at the Access Points (APs).
        </t> 
        
        <t>But for the lack a comprehensive specification for the ND proxy and
        in particular the lack of an equivalent to an association process,
        implementations have to rely on snooping for acquiring the related state,
        which is unsatisfactory in a lossy and mobile conditions. With snooping,
        a state (e.g. a new IPv6 address) may not be discovered or a change of
        state (e.g. a movement) may be missed, leading to unreliable
        connectivity.
        </t> 
        
        <!--t>
        It appears that in a variety of Wireless Local Area Networks (WLANs)
        and Wireless Personal Area Networks (WPANs), the decision to leverage
        the broadcast support of a particular link should be left to Layer-3
        based on the criticality of the message and the number of interested
        listeners on that link, for the lack of capability to indicate that
        criticality to the lower layer. 
        To achieve this, the operation at the Access Point cannot be a Layer-2 
        bridge operation, but that of a Layer-3 router; the concept of MultiLink
        Subnet (MLSN) must be reintroduced,
        with IPv6 backbone routers (6BBRs) interconnecting the various links and
        routing within the subnet. For link-scope multicast operations, a 6BBR
        participates to MLD on its access links and a multicast routing protocol
        is setup between the 6BBRs over the backbone of the MLSN. 
        </t>
        <t>
        As the network scales up, none of the approaches of using either 
        broadcast or N*unicast for a multicast packet is really satisfying and
        the protocols themselves need to be adapted to reduce their use of 
        multicast.
        </t>
        <t>One degree of improvement can be achieved by changing the tuning of
        the protocol parameters and operational practices, such as suggested in
        <xref target="RFC7772">
        Reducing energy consumption of Router Advertisements</xref> (RA).
        This works enables to lower the rate of RA messages but does not
        solve the problem associated with multicast NS and NA messages, which
        are a lot more frequent in large-scale radio environments with mobile
        devices which exhibit intermittent access patterns and short-lived IPv6
        addresses.
        </t-->
        <t>
        In the context of IEEE std. 802.15.4 <xref target="IEEEstd802154"/>, the 
        step of considering the radio as a medium that is different from
        Ethernet was already taken with the publication of 
        <xref target="RFC6775"> Neighbor Discovery Optimization for IPv6 over 
        Low-Power Wireless Personal Area Networks (6LoWPANs)</xref>. 
        RFC 6775 is updated as  
		<xref target="I-D.ietf-6lo-rfc6775-update"/>; the update includes 
        changes that are required by this document.
        </t>
        <t>       
        This 
        specification applies that same thinking to other wireless links
        such as Low-Power IEEE std. 802.11 (Wi-Fi) and IEEE std. 802.15.1 (Bluetooth)
        <xref target="IEEEstd802151"/>, 
        and extends <xref target="RFC6775"/> to enable proxy operation by the
        6BBR so as to decouple the broadcast domain in the backbone from the
        wireless links. The proxy operation can be maintained asynchronous
        so that low-power nodes or nodes that are deep in a mesh do not need
        to be bothered synchronously when a lookup is performed for their
        addresses, effectively implementing the ND contribution to the concept
        of a Sleep Proxy <xref target="I-D.nordmark-6man-dad-approaches"/>.
 
        </t>  
		
        <!-->
        <t>
        DHCPv6 <xref target="RFC3315"/> is still a viable option in Low power 
        and Lossy Network (LLN) to assign IPv6 global addresses. 
        However, the IETF standard that supports address assignment specifically 
        for LLNs is 6LoWPAN ND <xref target="RFC6775"/>, which is a mix of IPv6 
        stateless autoconfiguration mechanism (SLAAC) <xref target="RFC4862"/> 
        and a new registration process for ND. 
        This specification introduces a Layer-3 association process based on
        6LoWPAN ND that maintains a proxy state in the 6BBR to keep the LLN
        nodes reachable and protect their addresses through sleeping periods.
        </t>
         <t>
        A number of use cases, including the Industrial Internet, require a 
        large scale deployment of monitoring sensors that can only be realized
        in a cost-effective fashion with wireless technologies.
        Mesh networks are deployed when simpler hub-and-spoke topologies are not
        sufficient for the expected size, throughput, and density. Meshes imply
        the routing of packets, operated at either Layer-2 or Layer-3.
        For routing over a mesh at Layer-3, the IETF has designed the IPv6 
        Routing Protocol over LLN (RPL) <xref target="RFC6550"/>. 
        6LoWPAN ND was designed as a stand-alone mechanism separately from RPL,
        and the interaction between the 2 protocols was not defined. This 
        specification details how periodic updates from RPL can be used by the
        RPL root to renew the association of the RPL node to the 6BBR on its
        behalf so as to maintain the proxy operation active for that node.
        </t>
        
	  <t>
       This document suggests a limited evolution to <xref target="RFC6775"/> 
       so as to allow operation of a 6LoWPAN ND node while a routing protocol 
       (in first instance RPL) is present and operational.
       It also suggests a more generalized use of the information in the ARO
       option of the ND messages outside the strict LLN domain, for instance
       over a federating backbone.      
     </t-->
</section>

        <section title="Applicability and Requirements Served">
        
      <t> 
      <xref target="I-D.chakrabarti-nordmark-6man-efficient-nd">
		Efficiency aware IPv6 Neighbor Discovery Optimizations</xref> suggests 
      that 6LoWPAN ND  <xref target="RFC6775"/> can be extended to other types
      of links beyond IEEE std. 802.15.4 for which it was defined.
      The registration technique is beneficial when the Link-Layer technique
      used to carry IPv6 multicast packets is not sufficiently efficient in
      terms of delivery ratio or energy consumption in the end devices, in
      particular to enable energy-constrained sleeping nodes.
      The value of such extension is especially apparent in the case of mobile
      wireless nodes, to reduce the multicast operations that are related
      to classical ND (<xref target="RFC4861"/>, <xref target="RFC4862"/>) and 
      plague the wireless medium. 
      </t>
	   <t>
      This specification updates and generalizes 6LoWPAN ND to a broader
      range of Low power and Lossy Networks (LLNs) with a solid support
      for Duplicate Address Detection (DAD) and address lookup that does not
      require broadcasts over the LLNs.
      The term LLN is used loosely in this specification to cover multiple
      types of WLANs and WPANs, including <!--classical IEEE std. 802.11 
      basic service set (BSS), -->Low-Power Wi-Fi, BLUETOOTH(R) Low Energy, 
      IEEE std. 802.11AH <!--and Wi-Fi --> and IEEE std. 802.15.4 wireless meshes, so as
      to address the requirements listed in <xref target="Req3"/>
      
      </t>
	   <t>
      The scope of this draft is a Backbone Link that federates multiple
      LLNs as a single IPv6 MultiLink Subnet.
      Each LLN in the subnet is anchored at an IPv6 Backbone Router (6BBR). 
      The Backbone Routers interconnect the LLNs over the Backbone Link and 
      emulate that the LLN nodes are present on the Backbone using proxy-ND
      operations. This specification extends IPv6 ND over the backbone to
      discriminate address movement from duplication and eliminate stale state
      in the backbone routers and backbone nodes once a LLN node has roamed.
      This way, mobile nodes may roam rapidly from
      a 6BBR to the next and requirements in <xref target="Req1"/> are met.      
      </t>

      
      <t>This specification can be used by any wireless node to associate at
      Layer-3 with a 6BBR and register its IPv6 addresses to obtain routing
      services including proxy-ND operations over the backbone, effectively
      providing a solution to the requirements expressed in
      <xref target="Req4"/>.
      </t>
      <t>
      The Link Layer Address (LLA) that is returned as Target LLA (TLLA) in
      Neighbor Advertisements (NA) messages by the 6BBR on behalf of the 
      Registered Node over the backbone may be that of the Registering Node,
      in which case the 6BBR needs to bridge the unicast packets 
      (Bridging proxy), or that of  the 6BBR on the backbone, in which case the
      6BBRs needs to route the unicast packets (Routing proxy).
      In the latter case, the 6BBR may maintain
      the list of correspondents to which it has advertised its own MAC address
      on behalf of the LLN node and the IPv6 ND operation is minimized as the
      number of nodes scale up in the LLN. This enables to meet the requirements
      in <xref target="Req6"/> as long has the 6BBRs are dimensioned for the
      number of registration that each needs to support. 
      </t>
      <t>
      In the context of the the TimeSlotted Channel Hopping (TSCH) mode of
      <xref target="IEEEstd802154"/>, the <xref target="I-D.ietf-6tisch-architecture">
      6TiSCH architecture</xref> introduces how a 6LoWPAN ND host could connect
      to the Internet via a RPL mesh Network, but this requires additions to the 
      6LOWPAN ND protocol to support mobility and reachability in a secured and
      manageable environment. This specification details the new operations that
      are required to implement the 6TiSCH architecture and serves the
      requirements listed in <xref target="Req2"/>.
      </t>
      
      <t>
      In the case of Low-Power IEEE std. 802.11, a 6BBR may be collocated with a
      standalone AP or a CAPWAP <xref target="RFC5415"/> wireless controller,
      and the wireless client (STA) leverages this specification 
      to register its IPv6 address(es) to the 6BBR over the wireless medium.
      In the case of a 6TiSCH LLN mesh, the RPL root is collocated with a
      6LoWPAN Border Router (6LBR), and either collocated with or connected to
      the 6BBR over an IPv6 Link. 
      The 6LBR leverages this specification to register the LLN nodes on their 
      behalf to the 6BBR. 
      In the case of BTLE, the 6BBR is collocated with the router that
      implements the BTLE central role as discussed in section 2.2 of
      <xref target="RFC7668"/>.
      
      </t>     
      

</section>





        <section title="Terminology">
            <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
            "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
            and "OPTIONAL" in this document are to be interpreted as
            described in <xref target="RFC2119"/>.</t>

	    <t>
       Readers are expected to be familiar with all the terms and concepts
	    that are discussed in <xref target="RFC4861">"Neighbor Discovery for
	    IP version 6"</xref>, <xref target="RFC4862">"IPv6 Stateless Address
	    Autoconfiguration"</xref>, <xref target="RFC4919">"IPv6 over Low-Power
	    Wireless Personal Area Networks (6LoWPANs): Overview, Assumptions,
	    Problem Statement, and Goals"</xref>,
		 <xref target="RFC6775">Neighbor Discovery Optimization 
		 for Low-power and Lossy Networks</xref> and 
		 <xref target="I-D.ietf-ipv6-multilink-subnets">
		 "Multi-link Subnet Support in IPv6"</xref>.
           </t>
	    <t>Readers would benefit from reading 
		<xref target="RFC4903">"Multi-Link Subnet Issues"</xref>,
      <xref target="RFC6275">,"Mobility Support in IPv6" </xref>, 
       <xref target="RFC4389">
	    "Neighbor Discovery Proxies (ND Proxy)" </xref> and
	    <xref target="RFC4429">"Optimistic Duplicate Address Detection"
	    </xref> prior to this specification for a clear
	    understanding of the art in ND-proxying and binding.</t>
	   <t>Additionally, this document uses terminology from <xref
      target="RFC7102"></xref>, <xref
      target="I-D.ietf-6lo-rfc6775-update"></xref> and <xref
      target="I-D.ietf-6tisch-terminology"></xref>, and introduces
      the following
      terminology:
	  <list hangIndent="6" style="hanging">

	   <t hangText="Sleeping Proxy">
      A 6BBR acts as a Sleeping Proxy if it answers ND Neighbor Solicitation
      over the backbone on behalf of the Registered Node whenever possible. 
      This is the default mode for this specification but it may be overridden,
      for instance by configuration, into Unicasting Proxy.
	    </t>
	   <t hangText="Unicasting  Proxy">
      As a Unicasting Proxy, the 6BBR forwards NS messages to the Registering
      Node, transforming Layer-2 multicast into unicast whenever possible.
	    </t>
	   <t hangText="Routing proxy">
	    A 6BBR acts as a routing proxy if it advertises its own MAC address, as
       opposed to that of the node that performs the registration, as the TLLA
       in the proxied NAs over the backbone.
       In that case, the MAC address of the node is not visible at Layer-2 over
       the backbone and the bridging fabric is not aware of the addresses of the
       LLN devices and their mobility. The 6BBR installs a connected host route
       towards the registered node over the interface to the node, and acts as a
       Layer-3 router for unicast packets to the node. 
       The 6BBR updates the ND Neighbor Cache Entries (NCE) 
       in correspondent nodes if the wireless node moves and registers
       to another 6BBR, either with a single broadcast, or with a series of
       unicast NA(O) messages, indicating the TLLA of the new router.
       </t>
	   <t hangText="Bridging proxy">
	    A 6BBR acts as a bridging proxy if it advertises the MAC address of the
       node that performs the registration as the TLLA in the proxied NAs over
       the backbone. In that case, the MAC address and the mobility of the node
       is still visible across the bridged backbone fabric, as is traditionally
       the case with Layer-2 APs. The 6BBR acts as a Layer-2 bridge for unicast
       packets to the registered node. The MAC address exposed in the S/TLLA is
       that of the Registering Node, which is not necessarily the Registered
       Device. When a device moves within a LLN mesh, it may end up attached to
       a different 6LBR acting as Registering Node, and the LLA that is exposed
       over the backbone will change.
       </t>
	   <t hangText="Primary BBR">
	    The BBR that will defend a Registered Address for the purpose of DAD
       over the backbone.
	    </t>
	   <t hangText="Secondary BBR">
	    A BBR to which the address is registered. A Secondary Router MAY
       advertise the address over the backbone and proxy for it.
	    </t>
	    </list>
	   </t>
        </section>


	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->

	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<section anchor='overview' title="Overview">


      <t>
      An LLN node can move freely from an LLN anchored at a Backbone Router
      to an LLN anchored at another Backbone Router on the same backbone and
      conserve any of the IPv6 addresses that it has formed, transparently.
      <!--
      In a same fashion, a constrained node with sleeping behavior that resides
      on the Backbone may move its registration to one or more different BBRs
      and conserve its addresses with no disruption.-->
      </t>

<figure anchor='figBackbone'
 title="Backbone Link and Backbone Routers">
<artwork><![CDATA[
              |
            +-----+
            |     | Other (default) Router
            |     |
            +-----+
               |
               |      Backbone Link
         +--------------------+------------------+
         |                    |                  |
      +-----+             +-----+             +-----+
      |     | Backbone    |     | Backbone    |     | Backbone
      |     | router      |     | router      |     | router
      +-----+             +-----+             +-----+
         o                o   o  o              o o
     o o   o  o       o o   o  o  o         o  o  o  o o
    o  o o  o o       o   o  o  o  o        o  o  o o o
    o   o  o  o          o    o  o           o  o   o
      o   o o               o  o                 o o

      LLN              LLN              LLN

]]></artwork>
</figure>
		 <t> 
		The Backbone Routers maintain an abstract Binding Table of their
      Registered Nodes. The Binding Table operates as a distributed database
      of all the wireless Nodes whether they reside on the LLNs or on the
      backbone, and use an extension to the Neighbor Discovery Protocol to 
      exchange that information across the Backbone in the classical ND reactive
      fashion.
		</t>

      <t>
      The Extended Address Registration Option (ARO) defined in <xref
      target="I-D.ietf-6lo-rfc6775-update"></xref>
      is used to enable the registration for routing and proxy
      Neighbor Discovery operations by the 6BBR, and the Extended ARO (EARO)
      option is included in the ND exchanges over the backbone between the 6BBRs
      to sort out duplication from movement.
      </t>
      <t>
      Address duplication is sorted out with the Owner Unique-ID field in the 
      EARO, which is a generalization of the EUI-64 that allows different types
      of unique IDs beyond the name space derived from the MAC addresses.
      First-Come First-Serve rules apply, whether the duplication happens
      between LLN nodes as represented by their respective 6BBRs,
      or between an LLN node and a classical node that defends its address over
      the backbone with classical ND and does not include the EARO option.
      </t>
      <t>
      In case of conflicting registrations to multiple 6BBRs from a same node,
      a sequence counter called Transaction ID (TID) in the EARO enables
      6BBRs to sort out the latest anchor for that node. Registrations with
      a same TID are compatible and maintained, but, in case of different TIDs,
      only the freshest registration is maintained and the stale state is
      eliminated.
      </t>
	   <t>
	   With this specification, Backbone Routers perform ND proxy over the
      Backbone Link on behalf of their Registered Nodes.
      The Backbone Router operation is essentially similar to that of a
      <xref target="RFC6275">Mobile IPv6 (MIPv6)</xref> Home Agent.
	   This enables mobility support for LLN nodes that would move
	   outside of the network delimited by the Backbone link attach to a Home
      Agent from that point on. This also enables
	   collocation of Home Agent functionality within Backbone Router
	   functionality on the same backbone interface of a router.
      Further specification may extend this be allowing the 6BBR to redistribute
      host routes in routing protocols that would operate over the backbone, or
      in MIPv6 or the <xref target="RFC6830">Locator/ID Separation Protocol 
      (LISP)</xref> to support mobility on behalf of the nodes, etc... 
      </t>

     <t>The <xref target="RFC4429">Optimistic Duplicate Address Detection</xref> 
      (ODAD) specification details how an address can be used before a  
       Duplicate Address Detection (DAD) is complete, and insists that an 
       address that is TENTATIVE should not be associated to a Source Link-Layer 
       Address Option in a Neighbor Solicitation message. This specification
       leverages ODAD to create a temporary proxy state in the 6BBR till DAD is
       completed over the backbone. This way, the specification enables to 
       distribute proxy states across multiple 6BBR and co-exist with classical
       ND over the backbone.
       </t>
        </section>


<section anchor='opers' title="Backbone Router Routing Operations">
<figure anchor='figBackboneroute'
 title="Routing Configuration in the ML Subnet">
<artwork><![CDATA[
               |
            +-----+
            |     | Other (default) Router
            |     |
            +-----+ 
               | /64
               |      Backbone Link
         +-------------------+-------------------+
         | /64               | /64               | /64
      +-----+             +-----+             +-----+
      |     | Backbone    |     | Backbone    |     | Backbone
      |     | router      |     | router      |     | router
      +-----+             +-----+             +-----+
         o N*/128       o o  o M*/128          o o P*/128
     o o   o  o       o o   o  o  o         o  o  o  o o
    o  o o  o o       o   o  o  o  o        o  o  o o o
    o   o  o  o          o    o  o           o  o   o
      o   o o               o  o                 o o

      LLN              LLN              LLN

]]></artwork>
</figure>
	  <section anchor='bb' title="Over the Backbone Link">

	  <t>The Backbone Router is a specific kind of Border Router that performs 
	  proxy Neighbor Discovery on its backbone interface on behalf of the nodes
     that it has discovered on its LLN interfaces. 
	  </t>
	  <t>The backbone is expected to be a high speed, reliable Backbone link,
     with affordable and reliable multicast capabilities, such as a bridged 
     Ethernet Network, and to allow a full support of classical ND as specified
     in <xref target="RFC4861"/> and subsequent RFCs. In other words, the
	  backbone is not a LLN.
     </t><t> 
     Still, some restrictions of the attached LLNs will apply to the backbone.
     In particular, it is expected that the MTU is set to the same value on the
     backbone and all attached LLNs, and the scalability of the whole subnet
     requires that broadcast operations are avoided as much as possible on
     the backbone as well. Unless configured otherwise, the Backbone Router MUST
     echo the MTU that it learns in RAs over the backbone in the RAs that it
     sends towards the LLN links.
     </t><t>
     As a router, the Backbone Router behaves like any other IPv6 router on the
     backbone side. It has a connected route installed towards the backbone
     for the prefixes that are present on that backbone and that it proxies for
     on the LLN interfaces.
     </t><t>
     As a proxy, the 6BBR uses an EARO option in the NS-DAD and the multicast NA
     messages that it generates on behalf of a Registered Node, and it places an
     EARO in its unicast NA messages if and only if the NS/NA that stimulates it
     had an EARO in it.
     </t><t>
     When possible, the 6BBR SHOULD use unicast or solicited-node multicast 
     address (SNMA) <xref target="RFC4291"/> to defend its Registered Addresses
     over the backbone. In particular, the 6BBR MUST join the SNMA group
     that corresponds to a Registered Address as soon as it creates an entry for
     that address and as long as it maintains that entry, whatever the state of
     the entry. 
     The expectation is that it is possible to get a message delivered to
     all the nodes on the backbone that listen to a particular address 
     and support this specification - which includes all the 6BBRs in the
     MultiLink Subnet - by sending a multicast message to the associated SNMA
     over the backbone. 
     </t><t>
     The support of Optimistic DAD (ODAD) <xref target="RFC4429"/> is
     recommended for all nodes in the backbone and followed by the 6BBRs in
     their proxy activity over the backbone. With ODAD, any optimistic node
     MUST join the SNMA of a Tentative address, which interacts better with this
     specification. 
     </t><t>
     This specification allows the 6BBR in Routing Proxy mode to advertise the
     Registered IPv6 Address with the 6BBR Link Layer Address, and attempts to
     update Neighbor Cache Entries (NCE) in correspondent nodes over the 
     backbone, using gratuitous NA(Override). This method may fail of the
     multicast message is not properly received, and correspondent nodes may
     maintain an incorrect neighbor state, which they will eventually discover
     through Neighbor Unreachability Detection (NUD). Because mobility may be
     slow, the NUD procedure defined in <xref target="RFC4861"/> may be too
     impatient, and the support of <xref target="RFC7048"/> is recommended in
     all nodes in the network.
     </t><t>
     Since the MultiLink Subnet may grow very large in terms of individual
     IPv6 addresses, multicasts should be avoided as much as possible even
     on the backbone. Though it is possible for plain hosts to participate
     with legacy IPv6 ND support, the support by all nodes connected to the
     backbone of <xref target="I-D.ietf-6man-rs-refresh"/> is recommended,
     and this implies the support of <xref target="RFC7559"/> as well.
     </t>
	  </section>
	  <section anchor='bblln' title="Over the LLN Link">
     <t>As a router, the Nodes and Backbone Router operation on the LLN follows
     <xref target="RFC6775"/>. Per that specification, LLN Hosts generally do
     not depend on multicast RAs to discover routers.
     It is still generally required for LLN nodes to accept multicast RAs
     <xref target="RFC7772"/>, but those
     are rare on the LLN link.
     Nodes are expected to follow the <xref target="RFC6059">Simple Procedures
     for Detecting Network Attachment in IPv6</xref> (DNA procedures) to assert
     movements, and to support the <xref target="RFC7559">Packet-Loss Resiliency
     for Router Solicitations</xref> to make the unicast RS more reliable. 
     </t><t>
     The Backbone Router acquires its states about the addresses on the LLN side
     through a registration process from either the nodes themselves, or from a
     node such as a RPL root / 6LBR (the Registering Node) that performs the
     registration on behalf of the address owner (the Registered Node).
     </t><t>
     When operating as a Routing Proxy, the router installs hosts routes (/128)
     to the Registered Addresses over the LLN links, via the Registering Node
     as identified by the Source Address and the SLLAO option in the NS(EARO)
     messages. 
     </t><t>
     In that mode, the 6BBR handles the ND protocol over the backbone on behalf
     of the Registered Nodes, using its own MAC address in the TLLA and SLLA
     options in proxyed NS and NA messages. It results that for each Registered
     Address, a number of peer Nodes on the backbone have resolved the address
     with the 6BBR MAC address and keep that mapping stored in their Neighbor
     cache.
     </t><t>
     The 6BBR SHOULD maintain, per Registered Address, the list of the peers
     on the backbone to which it answered with it MAC address, and when a
     binding moves to a different 6BBR, it SHOULD send a unicast gratuitous
     NA(O) individually to each of them to inform them that the address has
     moved and pass the MAC address of the new 6BBR in the TLLAO option.     
     If the 6BBR can not maintain that list, then it SHOULD remember whether
     that list is empty or not and if not, send a multicast NA(O) to all nodes
     to update the impacted Neighbor Caches with the information from the new
     6BBR.
     </t><t>
     The Bridging Proxy is a variation where the BBR function is implemented in
     a Layer-3 switch or an wireless Access Point that acts as a Host from the
     IPv6 standpoint, and, in particular, does not operate the routing of IPv6
     packets. In that case, the SLLAO in the proxied NA messages is that of
     the Registering Node and classical bridging operations take place on data
     frames. 
     </t><t>
     If a registration moves from one 6BBR to the next, but the Registering
     Node does not change, as indicated by the S/TLLAO option in the ND
     exchanges, there is no need to update the Neighbor Caches in the peers
     Nodes on the backbone.
     On the other hand, if the LLAO changes, the 6BBR SHOULD inform all the
     relevant peers as described above, to update the impacted Neighbor Caches.
     In the same fashion, if the Registering Node changes with a new
     registration, the 6BBR SHOULD also update the impacted Neighbor Caches
     over the backbone.
     </t>
     </section>

        </section>
	  <section anchor='proxy' title="BackBone Router Proxy Operations">


	  <t>This specification enables a Backbone Router to proxy Neighbor Discovery
     operations over the backbone on behalf of the nodes that are registered to
     it, allowing any node on the backbone to reach a Registered Node as if it
     was on-link. The backbone and the LLNs are considered different Links in
     a MultiLink subnet but the prefix that is used may still be advertised as
     on-link on the backbone to support legacy nodes; multicast ND messages
     are link-scoped and not forwarded across the backbone routers. 
     </t>
	  <t>
     ND Messages on the backbone side that do not match to a registration on the 
     LLN side are not acted upon on the LLN side, which stands protected. On the
     LLN side, the prefixes associated to the MultiLink Subnet are presented as
     not on-link, so address resolution for other hosts do not occur.
     </t>
	  <t>
     The default operation in this specification is Sleeping proxy which means:
	  <list  style="symbols">
	  <t> creating a new entry in an abstract Binding Table for a new Registered
     Address and validating that the address is not a duplicate over the
     backbone</t>
	  <t> defending a Registered Address over the backbone using NA messages with
     the Override bit set on behalf of the sleeping node whenever possible</t>
	  <t> advertising a Registered Address over the backbone using NA messages, 
	  asynchronously or as a response to a Neighbor Solicitation messages.</t>
	  <t> Looking up a destination over the backbone in order to deliver packets
	  arriving from the LLN using Neighbor Solicitation messages.</t>
	  <t>Forwarding packets from the LLN over the backbone, and the other way
     around.</t>
	  <t>Eventually triggering a liveliness verification of a stale registration.
     </t>
	  
	  </list>
     A 6BBR may act as a Sleeping Proxy only if the state of the binding entry
     is REACHABLE, or TENTATIVE in which case the answer is delayed.
     In any other state, the Sleeping Proxy operates as a Unicasting Proxy.
	  </t>
	  <t>
     As a Unicasting Proxy, the 6BBR forwards NS messages to the Registering
     Node, transforming Layer-2 multicast into unicast whenever possible. This 
     is not possible in UNREACHABLE state, so the NS messages are multicasted,
     and rate-limited to protect the medium with an exponential back-off.
     In other states, The messages are forwarded to the Registering Node as 
     unicast Layer-2 messages. In TENTATIVE state, the NS message is either
     held till DAD completes, or dropped.
	  </t>
	  <t>
	  The draft introduces the optional concept of primary and secondary BBRs.
     
     The primary is the backbone router that has the highest EUI-64 address of
     all the 6BBRs that share a registration for a same Registered Address, with
     the same Owner Unique ID and same Transaction ID, the EUI-64 address being
     considered as an unsigned 64bit integer.
     
     The concept is defined with the granularity of an address, that is a given
	  6BBR can be primary for a given address and secondary or another one, 
	  regardless on whether the addresses belong to the same node or not.
     
	  The primary Backbone Router is in charge of protecting the address for DAD
     over the Backbone. 
     
     Any of the Primary and Secondary 6BBR may claim the address over the 
	  backbone, since they are all capable to route from the backbone to the LLN
     node, and the address appears on the backbone as an anycast address.</t>
	  
     <t>
     The Backbone Routers maintain a distributed binding table, using classical
     ND over the backbone to detect duplication. This specification requires
     that:
      <list style="numbers">
	  <t>All addresses that can be reachable from the backbone, including IPv6
      addresses based on burn-in EUI64 addresses MUST be registered to the 6BBR.
      </t>
	   <t>
      A Registered Node MUST include the EARO option in an NS message that
      used to register an addresses to a 6LR; the 6LR MUST propagate that option
      unchanged to the 6LBR in the DAR/DAC exchange, and the 6LBR MUST
      propagate that option unchanged in proxy registrations. 
	   </t>
	   <t>
      The 6LR MUST echo the same EARO option in the NA that it uses to respond,
      but for the status filed which is not used in NS messages, and
      significant in NA.     
	   </t>
	   </list>
	   </t>
	   <t>
	   A false positive duplicate detection may arise over the backbone, 
	   for instance if the Registered Address is registered to more than one LBR, 
      or if the node has moved. Both situations are handled gracefully 
	   unbeknownst to the node. In the former case, 
	   one LBR becomes primary to defend the address over the 
	   backbone while the others become secondary and may
	   still forward packets back and forth. 
      In the latter case the LBR that receives
	   the newest registration wins and becomes primary.

      </t><t>
      The expectation in this specification is that there is a single
      Registering Node at a time per Backbone Router for a given Registered
      Address, but that a Registered Address may be registered to Multiple 6BBRs
      for higher availability.
      </t><t>
      Over the LLN, and for any given Registered Address, it is REQUIRED that:
      <list>
      <t>
      de-registrations (newer TID, same OUID, null Lifetime) are accepted
      and responded immediately with a status of 4; the entry is deleted;
      </t><t>    
      newer registrations (newer TID, same OUID, non-null Lifetime) are accepted
      and responded with a status of 0 (success); the entry is updated with the
      new TID, the new Registration Lifetime and the new Registering Node, if any
      has changed;
      in TENTATIVE state the response is held and may be overwritten;
      in other states the Registration-Lifetime timer is
      restarted and the entry is placed in REACHABLE state.
      </t><t>        
      identical registrations (same TID, same OUID) from a same Registering Node
      are not processed but responded with a status of 0 (success); they are
      expected to be identical and an error may be logged if not;
      in TENTATIVE state, the response is held and may be overwritten, but it 
      MUST be eventually produced and it carries the result of the DAD process;
      </t><t>        
      older registrations (not(newer or equal) TID, same OUID)
      from a same Registering Node are ignored; 
      </t><t>        
      identical and older registrations (not-newer TID, same OUID) from a
      different Registering Node are responded immediately with a status of 3
      (moved); this may be rate limited to protect the medium;
      </t><t>        
      and any registration for a different Registered Node (different OUID)
      are responded immediately with a status of 1 (duplicate).
      </t>
      </list>        
   </t>
	  <!-- t>A Backbone Router advertises itself using a new option in the ND Router Advertisement
	  Message. A new anycast address 6LoWPAN_BBR is also introduced for the purpose of reaching the nearest 
	  Backbone Router in the absence of any information. This enables to reduce the use of multicast
	  RAs for the router discovery operation. The routing to the nearest router that owns that anycast 
	  address is out of scope for this specifiation.
	  </t -->
	  <!-- t> Another anycast address 6LoWPAN-NODE is introduced
	  to enable any wireless Node to receive a response to its registration whether it completes
	  successfully or not.
	  </t -->
	  
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<!-- **************************************************************** -->
	<section anchor='crea' title="Registration and Binding State Creation">
   
   <t>
   Upon a registration for a new address with an NS(EARO), the 6BBR performs a
   DAD operation over the backbone placing the new address as target in the
   NS-DAD message. The EARO from the registration MUST be placed unchanged in
   the NS-DAD message, and an entry is created in TENTATIVE state for a
   duration of TENTATIVE_DURATION. The NS-DAD message is sent multicast over
   the backbone to the SNMA address associated with the registered address.
   If that operation is known to be costly, and the 6BBR has an indication from
   another source (such as a NCE) that the Registered Address was present on the
   backbone, that information may be leveraged to send the NS-DAD message as a
   Layer-2 unicast to the MAC that was associated with the Registered Address.
   </t><t>
   In TENTATIVE state:
   <list style="symbols">
   <t>
   the entry is removed if an NA is received over the
   backbone for the Registered Address with no EARO option, or with an EARO
   option with a status of 1 (duplicate) that indicates an existing registration
   for another LLN node. The OUID and TID fields in the EARO option received
   over the backbone are ignored. A status of 1 is returned in the EARO option
   of the NA back to the Registering Node;
   <!--
   and the OUID and TID fields in the EARO option
   are obfuscated with null or random values to avoid network scanning and
   impersonation attacks.
   -->
   </t><t>
   the entry is also removed if an NA with an ARO option
   with a status of 3 (moved), or a NS-DAD with an ARO option that indicates a
   newer registration for the same Registered Node, is received over the
   backbone for the Registered Address. A status of 3 is returned in the
   NA(EARO) back to the Registering Node;
   </t><t>
   when a registration is updated but not deleted, e.g. from a newer
   registration, the DAD process on the backbone continues and the running
   timers are not restarted;
   </t><t>
   Other NS (including DAD with no EARO option) and NA from the backbone are
   not responded in TENTATIVE state, but the list of their origins may be
   kept in memory and if so, the 6BBR may send them each a unicast NA with eventually an EARO option when the TENTATIVE_DURATION timer elapses, so
   as to cover legacy nodes that do not support ODAD. 
    </t><t>
   When the TENTATIVE_DURATION timer elapses, a status 0 (success) is
   returned in a NA(EARO) back to the Registering Node(s), and the entry goes
   to REACHABLE state for the Registration Lifetime; the DAD process is
   successful and the 6BBR MUST send a multicast NA(EARO) to the SNMA
   associated to the Registered Address over the backbone with the 
   Override bit set so as to take over the binding from other 6BBRs.
   </t>
   </list>
   </t>   
    </section>
    
	<section anchor='broperation' title="Defending Addresses">
	<t>
   If a 6BBR has an entry in REACHABLE state for a Registered Address:
   <list style="symbols">
   <t> 
   If the 6BBR is primary, or does not support the concept, it MUST defend that address over the backbone upon an incoming NS-DAD, either if the NS
   does not carry an EARO, or if an EARO is present that indicates a different Registering Node (different OUID). The 6BBR sends a NA message
   with the Override bit set and the NA carries an EARO option if and only if
   the NS-DAD did so.
   When present, the EARO in the NA(O) that is sent in response to the
   NS-DAD(EARO) carries a status of 1 (duplicate), and the OUID and TID
   fields in the EARO option are obfuscated with null or random values to
   avoid network scanning and impersonation attacks.
   </t><t>
   If the 6BBR 
   receives an NS-DAD(EARO) that reflect a newer registration, the 6BBR
   updates the entry and the routing state to forward packets to
   the new 6BBR, but keeps the entry REACHABLE. In that phase, it MAY use
   REDIRECT messages to reroute traffic for the Registered Address to the new
   6BBR.
   </t><t>
   If the 6BBR 
   receives an NA(EARO) that reflect a newer registration, the 6BBR removes
   its entry and sends a NA(AERO) with a status of 3 (moved) to the
   Registering Node, if the Registering Node is different from the Registered
   Node. If necessary, the 6BBR cleans up ND cache in peers nodes as
   discussed in <xref target="bb"/>, by sending a series of unicast to the
   impacted nodes, or one broadcast NA(O) to all-nodes.
   </t><t>
   If the 6BBR received a NS(LOOKUP) for a Registered Address, it answers
   immediately with an NA on behalf of the Registered Node, without
   polling it. There is no need of an EARO in that exchange.
      </t><t>
   When the Registration-Lifetime timer elapses, the entry goes
   to STALE state for a duration of STABLE_STALE_DURATION in LLNs that 
   keep stable addresses such as LWPANs, and UNSTABLE_STALE_DURATION in
   LLNs where addresses are renewed rapidly, e.g. for privacy reasons.
   </t>
   </list>
   </t>
   <t>
   The STALE state is a chance to keep track of the backbone peers that
   may have an ND cache pointing on this 6BBR in case the Registered 
   Address shows back up on this or a different 6BBR at a later time.
   In STALE state:
   <list style="symbols">
   <t>  
   If the Registered Address is claimed by another node on the 
   backbone, with an NS-DAD or an NA, the 6BBR does not defend the address.
   Upon an NA(O), or the stale time elapses, the 6BBR removes
   its entry and sends a NA(AERO) with a status of 4 (removed) to the
   Registering Node.
   </t><t>
   If the 6BBR received a NS(LOOKUP) for a Registered Address, the 6BBR MUST
   send an NS(NUD) following rules in <xref target="RFC7048"/> to the
   registering Node targeting the Registered Address prior to answering. 
   If the NUD succeeds, the operation in REACHABLE state applies.
   If the NUD fails, the 6BBR refrains from
   answering the lookup. The NUD expected to be mapped by the 
   Registering Node into a liveliness validation of the Registered Node if
   they are in fact different nodes.
	</t>

   </list>
   </t>
    </section>
		

	  </section>
        <section title="Security Considerations">
           <t>
	   This specification expects that the link layer is sufficiently protected,
      either by means of physical or IP security for the Backbone Link or MAC
      sublayer cryptography.
	   In particular, it is expected that the LLN MAC provides secure unicast
	   to/from the Backbone Router and secure Broadcast from the Backbone Router
      in a way that prevents tempering with or replaying the RA messages.
	   </t>
	   <t>
	   The use of EUI-64 for forming the Interface ID in the link local address prevents the usage of Secure ND (<xref target="RFC3971"/> and 
      <xref target="RFC3972"/>) and address privacy techniques. This
      specification RECOMMENDS the use of additional protection against 
      address theft such as provided by 
      <xref target="I-D.ietf-6lo-ap-nd"/>, which guarantees the 
      ownership of the OUID.
	   </t>
      <t>
      When the ownership of the OUID cannot be assessed, this specification
      limits the cases where the OUID and the TID are multicasted, and
      obfuscates them in responses to attempts to take over an address.
      </t>

        </section>
    <section anchor="const" title="Protocol Constants">
      <t>This Specification uses the following constants:
	  <list  style="hanging">
	  <t hangText="TENTATIVE_DURATION:      ">800 milliseconds</t>
	  <t hangText="STABLE_STALE_DURATION:   ">24 hours</t>
	  <t hangText="UNSTABLE_STALE_DURATION: ">5 minutes</t>
	  <t hangText="DEFAULT_NS_POLLING:      ">3 times</t>
	  </list>
     </t>
        </section>
        
        
        <section title="IANA Considerations">
        <t>This document has no request to IANA. </t> 

        </section>


<section title="Acknowledgments">
<t>Kudos to Eric Levy-Abegnoli who designed the First Hop Security infrastructure at Cisco.</t>
</section>

    </middle>

    <back>
	
   
    <references title='Normative References'>
       &RFC2119;
       &RFC8200;
       &RFC4291;
       &RFC4429;
       &RFC4861;
       &RFC4862;
       &RFC6059;
       &RFC6550;
       &RFC6775;
       
	  <?rfc include='reference.I-D.ietf-6lo-rfc6775-update'?> 

    </references>
	
    <references title='Informative References'>

   <!--    &RFC3315; -->
       
       &RFC3810;
	   
       &RFC3971;

       &RFC3972;

       &RFC4389;

       &RFC4903;
       &RFC4919;
       &RFC5415;
       &RFC6275;
       &RFC6282;
       &RFC6830;
       &RFC7217;
      <?rfc include='reference.RFC.7048'?>
       &RFC7428;

	    
	  <?rfc include='reference.RFC.8105.xml'?> 
	  <?rfc include='reference.I-D.ietf-bier-architecture'?> 
	  <?rfc include='reference.I-D.ietf-6lo-nfc.xml'?> 
	  <?rfc include='reference.I-D.popa-6lo-6loplc-ipv6-over-ieee19012-networks.xml'?> 
	  <?rfc include='reference.RFC.8163.xml'?> 
	  <?rfc include='reference.RFC.7668.xml'?> 
     <?rfc include='reference.I-D.delcarpio-6lo-wlanah.xml'?>
     <?rfc include='reference.RFC.7772.xml'?> 
     
     
      <?rfc include='reference.I-D.vyncke-6man-mcast-not-efficient.xml'?>
      <?rfc include='reference.I-D.yourtchenko-6man-dad-issues.xml'?>
      <?rfc include='reference.I-D.nordmark-6man-dad-approaches.xml'?>
      <?rfc include='reference.I-D.ietf-6man-rs-refresh.xml'?>
      <?rfc include='reference.RFC.7559.xml'?>
      <?rfc include='reference.I-D.ietf-6lo-ap-nd.xml'?>
      
      
      
      
      <?rfc include='reference.I-D.ietf-ipv6-multilink-subnets.xml'?>
      <?rfc include='reference.RFC.7102.xml'?>
      <?rfc include='reference.I-D.ietf-6tisch-terminology.xml'?>
	  <?rfc include='reference.I-D.ietf-6tisch-architecture.xml'?> 
	  <?rfc include='reference.I-D.chakrabarti-nordmark-6man-efficient-nd.xml'?> 
	  
    </references>

    <references title="External Informative References">
    	<!--
      <reference anchor="HART">
        <front>
          <title>Highway Addressable Remote Transducer, a group of
          specifications for industrial process and control devices
          administered by the HART Foundation</title>

          <author>
            <organization>www.hartcomm.org</organization>
          </author>

          <date></date>
        </front>
      </reference>

      <reference anchor="ISA100.11a"
                 target="http://www.isa.org/Community/SP100WirelessSystemsforAutomation">
        <front>
          <title>ISA100, Wireless Systems for Automation</title>

          <author>
            <organization>ISA</organization>
          </author>

          <date day="05" month="May" year="2008" />
        </front>
      </reference>
-->
      <reference anchor="IEEEstd8021">
         <front>
            <title>IEEE Standard for Information technology--
            Telecommunications and information exchange between systems Local and metropolitan area networks 
            Part 1: Bridging and Architecture
            </title>
            <author>
               <organization>IEEE standard for Information Technology</organization>
            </author>
            <date/>
         </front>
      </reference>
      <reference anchor="IEEEstd80211">
         <front>
            <title>IEEE Standard for Information technology--
            Telecommunications and information exchange between systems Local and metropolitan area networks--
            Specific requirements 
            Part 11: Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) Specifications
            </title>
            <author>
               <organization>IEEE standard for Information Technology</organization>
            </author>
            <date/>
         </front>
      </reference>
      <reference anchor="IEEEstd802151">
         <front>
            <title>IEEE Standard for Information Technology - Telecommunications
            and Information Exchange Between Systems - Local and Metropolitan Area 
            Networks - Specific Requirements. - Part 15.1: Wireless Medium Access
            Control (MAC) and Physical Layer (PHY) Specifications for Wireless
            Personal Area Networks (WPANs)
            </title>
            <author>
               <organization>IEEE standard for Information Technology</organization>
            </author>
            <date/>
         </front>
      </reference>
      <reference anchor="IEEEstd802154">
         <front>
            <title>IEEE Standard for Local and metropolitan area networks--
            Part 15.4: Low-Rate Wireless Personal Area Networks (LR-WPANs)
            </title>
            <author>
               <organization>IEEE standard for Information Technology</organization>
            </author>
            <date/>
         </front>
      </reference>
    </references>
	
    <section title="Requirements">
    <t>This section lists requirements that were discussed at 6lo for an update
    to 6LoWPAN ND. This specification meets most of them, but those listed in
    <xref target="Req5"/> which are deferred to a different specification such as
    <xref target="I-D.ietf-6lo-ap-nd"/>.
    </t>
       <section anchor='Req1' title="Requirements Related to Mobility">
   <t>
   Due to the unstable nature of LLN links, even in a LLN of immobile nodes
   a 6LoWPAN Node may change its point of attachment to a 6LR, say 6LR-a, 
   and may not be able to notify 6LR-a. Consequently, 6LR-a may still attract
   traffic that it cannot deliver any more. When links to a 6LR change state,
   there is thus a need to identify stale states in a 6LR and restore
   reachability in a timely fashion.   
   </t><t> 
   Req1.1: Upon a change of point of attachment, connectivity via a new 6LR MUST be 
   restored timely without the need to de-register from the previous 6LR.
   </t><t> 
   Req1.2: For that purpose, the protocol MUST enable to differentiate between multiple 
   registrations from one 6LoWPAN Node and registrations from different 6LoWPAN Nodes 
   claiming the same address. 
   </t><t> 
   Req1.3: Stale states MUST be cleaned up in 6LRs.   
   </t><t> 
   Req1.4: A 6LoWPAN Node SHOULD also be capable to register its Address to multiple 
   6LRs, and this, concurrently.  
    </t>
      </section>
   <section anchor='Req2' title="Requirements Related to Routing Protocols">
   <t> The point of attachment of a 6LoWPAN Node may be a 6LR in an LLN mesh. 
   IPv6 routing in a LLN can be based on RPL, which is the routing 
   protocol that was defined at the IETF for this particular purpose. 
   Other routing protocols than RPL are also considered  by Standard Defining
   Organizations (SDO) on the basis of the expected network characteristics. 
   It is required that
   a 6LoWPAN Node attached via ND to a 6LR would need to participate in the 
    selected routing protocol to obtain reachability via the 6LR.
</t><t>
    Next to the 6LBR unicast address registered by ND, other addresses including
    multicast addresses are needed as well. For example a routing protocol often
    uses a multicast address to register changes to established paths.
    ND needs to register such a multicast address to enable routing concurrently
    with discovery.
</t><t>
Multicast is needed for groups. Groups MAY be
   formed by device type (e.g. routers, street lamps), location (Geography, 
   RPL sub-tree), or both.
</t>
   <t>The Bit Index Explicit Replication (BIER) 
    <xref target="I-D.ietf-bier-architecture">Architecture</xref> 
    proposes an optimized technique to enable multicast in a LLN with a very
    limited requirement for routing state in the nodes.
</t>
   <t> 
   Related requirements are:  
   </t><t>
   Req2.1: The ND registration method SHOULD be extended in such a fashion that 
   the 6LR MAY advertise the Address of a 6LoWPAN Node over the selected routing
   protocol and obtain 
   reachability to that Address using the selected routing protocol.   
   </t><t> 
   Req2.2: Considering RPL, the Address Registration Option that is used in 
   the ND registration 
   SHOULD be extended to carry enough information to generate a DAO 
   message as specified in <xref target="RFC6550"/> section 6.4, in particular 
   the capability to compute a Path Sequence and, as an option, a RPLInstanceID.
   </t><t> 
   Req2.3: Multicast operations SHOULD be supported and optimized, for instance
   using BIER or MPL. Whether ND is appropriate for the registration to the 6BBR
   is to be defined, considering the additional burden of supporting the
   <xref target="RFC3810"> Multicast Listener Discovery Version 2 </xref>
   (MLDv2) for IPv6. 
</t>
      </section>
	<section anchor='Req3' title="Requirements Related to the Variety of Low-Power Link types">
   
   <t>
   <xref target="RFC6775">6LoWPAN ND</xref> was defined with a focus on 
   IEEE std. 802.15.4 and in particular the capability to derive a unique Identifier
   from a globally unique MAC-64 address. At this point, the 6lo Working 
   Group is extending the <xref target="RFC6282">6LoWPAN Header Compression (HC)
   </xref> technique to other link types 
   <xref target="RFC7428">ITU-T G.9959</xref>,
   <xref target="RFC8163">Master-Slave/Token-Passing</xref>,
   <xref target="RFC8105">DECT Ultra Low Energy</xref>,
   <xref target="I-D.ietf-6lo-nfc">Near Field Communication</xref>,
   <xref target="I-D.delcarpio-6lo-wlanah">IEEE std. 802.11ah</xref>,
   as well as <xref target="I-D.popa-6lo-6loplc-ipv6-over-ieee19012-networks">
   IEEE1901.2 Narrowband Powerline Communication Networks</xref> and
   <xref target="RFC7668">BLUETOOTH(R) Low Energy</xref>.
   </t><t> 
   Related requirements are:  
   </t><t>
   Req3.1: The support of the registration mechanism SHOULD be extended to more LLN 
   links than IEEE 802.15.4, matching at least the LLN links for which an "IPv6
   over foo" specification exists, as well as Low-Power Wi-Fi.
   </t><t> 
   Req3.2: As part of this extension, a mechanism to compute a unique Identifier should
   be provided, with the capability to form a Link-Local Address that SHOULD be unique at least within the LLN connected to a 6LBR discovered by ND in each node within the LLN.
   </t><t> 
   Req3.3: The Address Registration Option used in the ND registration SHOULD be
   extended to carry the relevant forms of unique Identifier.
</t><t>
Req3.4: The Neighbour Discovery should specify the formation of a site-local address that follows the security recommendations from <xref target="RFC7217"/>.
   </t>   
      </section>
	<section anchor='Req4' title="Requirements Related to Proxy Operations">
   
   <t>
   Duty-cycled devices may not be able to answer themselves to a lookup from a node
   that uses classical ND on a backbone and may need a proxy. Additionally, the duty-cycled device may need to rely on the 6LBR to perform 
   registration to the 6BBR. 
</t><t>
   The ND registration method SHOULD defend the addresses of duty-cycled devices that are sleeping most of the
   time and not capable to defend their own Addresses.
   </t><t>
   Related requirements are:  
   </t><t>
   Req4.1: The registration mechanism SHOULD enable a third party to proxy register 
   an Address on behalf of a 6LoWPAN node that may be sleeping or located
   deeper in an LLN mesh.
   </t><t>
   Req4.2: The registration mechanism SHOULD be applicable to a duty-cycled device 
   regardless of the link type, and enable a 6BBR to operate as a proxy to 
   defend the registered Addresses on its behalf.
   </t><t>
   Req4.3: The registration mechanism SHOULD enable long sleep durations, in the
   order of multiple days to a month.
   </t>
      </section>

	<section anchor='Req5' title="Requirements Related to Security">
   <t> In order to guarantee the operations of the 6LoWPAN ND flows, the 
   spoofing of the 6LR, 6LBR and 6BBRs roles should be avoided. Once a node 
   successfully registers an address, 6LoWPAN ND should provide energy-efficient
   means for the 6LBR to protect that ownership even when the node that registered the address is sleeping.
</t>
<t>
 In particular, 
   the 6LR and the 6LBR then should be able to verify whether a subsequent 
   registration for a given Address comes from the original node. 
</t><t>
In a LLN it makes sense to base security on layer-2 security. During bootstrap of the LLN, nodes join the network after authorization by a Joining Assistant (JA) or a Commissioning Tool (CT). After joining nodes communicate with each other via secured links. The keys for the layer-2 security are distributed by the JA/CT. The JA/CT can be part of the LLN or be outside the LLN. In both cases it is needed that packets are routed between JA/CT and the joining node.
    
   </t><t> 
   Related requirements are:  
   </t><t>
   Req5.1: 6LoWPAN ND security mechanisms SHOULD provide a mechanism for the 
   6LR, 6LBR and 6BBR to authenticate and authorize one another for their 
   respective roles, as well as with the 6LoWPAN Node for the role of 6LR. 
   </t><t> 
   Req5.2: 6LoWPAN ND security mechanisms SHOULD provide a mechanism for the 6LR 
   and the 6LBR to validate new registration of authorized nodes. Joining of unauthorized nodes MUST be impossible.   
   </t><t> 
   Req5.3: 6LoWPAN ND security mechanisms SHOULD lead to small packet sizes. In
   particular, the NS, NA, DAR and DAC messages for a re-registration flow 
   SHOULD NOT exceed 80 octets so as to fit in a secured IEEE std. 802.15.4 frame.
   </t><t> 
   Req5.4: Recurrent 6LoWPAN ND security operations MUST NOT be computationally 
   intensive on the LoWPAN Node CPU. When a Key hash calculation is employed, a 
   mechanism lighter than SHA-1 SHOULD be preferred.
   </t><t> 
   Req5.5: The number of Keys that the 6LoWPAN Node needs to manipulate SHOULD 
   be minimized.
   </t><t> 
   Req5.6: The 6LoWPAN ND security mechanisms SHOULD enable CCM* for use at both
   Layer 2 and Layer 3, and SHOULD enable the reuse of security code that has to 
   be present on the device for upper layer security such as TLS. 
   </t><t> 
   Req5.7: Public key and signature sizes SHOULD be minimized while maintaining 
   adequate confidentiality and data origin authentication for multiple types
   of applications with various degrees of criticality.  
   </t><t>
   Req5.8: Routing of packets should continue when links pass from the unsecured
   to the secured state.   
   </t><t> 
   Req5.9: 6LoWPAN ND security mechanisms SHOULD provide a mechanism for the 6LR 
   and the 6LBR to validate whether a new registration for a given address
   corresponds to the same 6LoWPAN Node that registered it initially, and,
   if not, determine the rightful owner, and deny or clean-up
   the registration that is duplicate. 
   </t>
      </section>

	<section anchor='Req6' title="Requirements Related to Scalability">
   <t>
   Use cases from Automatic Meter Reading (AMR, collection tree operations) and
   Advanced Metering Infrastructure (AMI, bi-directional communication to the 
   meters) indicate the needs for a large number of LLN nodes pertaining to a 
   single RPL DODAG (e.g. 5000) and connected to the 6LBR over a large number of
   LLN hops (e.g. 15).  
   </t><t> 
   Related requirements are:  
   </t><t>
   Req6.1: The registration mechanism SHOULD enable a single 6LBR to register
   multiple thousands of devices.
   </t><t>
   Req6.2: The timing of the registration operation should allow for a large 
   latency such as found in LLNs with ten and more hops.
   </t>
      </section>
   </section>
    </back>

</rfc>
